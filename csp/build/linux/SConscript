# -*- python -*-
#
# Copyright 2004-2005 Mark Rose <mkrose@users.sourceforge.net>
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA

Import('env')

expenv = env.Clone()
expenv.Append(CPPDEFINES=Split('CSPLIB_EXPORTS'))

csplib = expenv.SharedLibrary(
    target = 'csplib',
    source = Glob('data/*.cpp') + \
        Glob('net/*.cpp') + \
#        Glob('net/*.net') + \
        Glob('numeric/*.cpp') + \
        Glob('spatial/*.cpp') + \
        Glob('thread/*.cpp') + \
        Glob('util/*.cpp') + \
        Glob('xml/*.cpp'))
Alias('all', csplib)
Export('csplib')

csplib_config = env.Program('csplib_config', source = ['util/Config.cpp'])
Alias('all', csplib_config)


# build.Generate(env,
# 	command = '{csplib_config} > $TARGET',
# 	targets = ['#/csplib/util/Config.h'])

# env.Depends('#/csplib/util/Uniform.h', '#/csplib/util/Config.h')


csplib_module = env.SharedLibrary(
    'csplib_module',
    source = ['csplib.i'])
Depends(csplib_module, csplib)
Alias('all', csplib_module)


# build.Test(env,
# 	name = 'test_data',
# 	sources = [
#         	'data/test/test_GeoPos.cpp',
# 		'data/test/test_Object.cpp',
#                 'data/test/test_Real.cpp',
# 		'data/test/test_Quat.cpp',
# 		'data/test/test_Vector3.cpp',
# 	],
# 	deps = ['csplib'],
# 	aliases = ['all'])

# build.Test(env,
# 	name = 'test_util',
# 	sources = [
# 		'util/test/test_Boolean.cpp',
# 		'util/test/test_FileUtility.cpp',
# 		'util/test/test_Ref.cpp',
# 		'util/test/test_StringTools.cpp',
# 		'util/test/test_Testing.cpp'
# 	],
# 	deps = ['csplib'],
# 	aliases = ['all'])

#build.Test(env,
#	name = 'test_numeric',
#	sources = [
#		# 'numeric/test/test_Vector.cpp',
#		# 'numeric/test/test_NumericalMethod.cpp',
#	],
#	deps = ['csplib'],
#        aliases = ['all'])

#build.Program(env,
#	name = 'numeric_timing',
#	sources = ['numeric/test/NumericalMethodTiming.cpp'],
#	deps = ['csplib'],
#        aliases = ['all'])

