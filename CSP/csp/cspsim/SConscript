# -*- python -*-
#
# Copyright 2004-2005 Mark Rose <mkrose@users.sourceforge.net>
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA

Import('env build')
expenv = env.Copy()
expenv.AppendUnique(CPPDEFINES=Split('CSPSIM_EXPORTS'))

build.SourceGroup(expenv,
	name = 'cspsim/battlefield',
	sources = [
		'battlefield/Battlefield.cpp',
		'battlefield/Battlefield.h',
		'battlefield/BattlefieldMessages.net',
		'battlefield/SimObject.cpp',
		'battlefield/SimObject.h',
	],
	deps = ['csplib'])


build.SourceGroup(expenv,
	name = 'cspsim/config',
	sources = [
		'Config.cpp',
		'Config.h',
	],
	deps = ['csplib'])


build.SourceGroup(expenv,
	name = 'cspsim',
	sources = [
		'cspsim.i',

		'AircraftObject.cpp',
		'AircraftObject.h',
		'AircraftPhysicsModel.cpp',
		'AircraftPhysicsModel.h',
		'Animation.cpp',
		'Animation.h',
		'AnimationSequence.cpp',
		'AnimationSequence.h',
		'Atmosphere.cpp',
		'Atmosphere.h',
		'BaseDynamics.cpp',
		'BaseDynamics.h',
		'BaseScreen.cpp',
		'BaseScreen.h',
		'Bus.cpp',
		'Bus.h',
		'CSPSim.cpp',
		'CSPSim.h',
		'ChannelMirror.h',
		'Channels.cpp',
	#	'ChunkLodTerrain.cpp',
	#	'ChunkLodTerrain.h',
		'CockpitInterface.cpp',
		'CockpitInterface.h',
		'Collision.cpp',
		'Collision.h',
		'Colorspace.cpp',
		'Colorspace.h',
		'ConditionsChannels.h',
#		'Config.cpp',
#		'Config.h',
		'ControlInputsChannels.h',
		'ControlNode.h',
		'ControlSurfacesChannels.h',
		'Controller.cpp',
		'Controller.h',
		'DamageModifier.cpp',
		'DamageModifier.h',
		'DataRecorder.cpp',
		'DataRecorder.h',
	#	'DemeterTerrain.cpp',
	#	'DemeterTerrain.h',
		'DoubleChannelMirror.cpp',
		'DynamicModel.cpp',
		'DynamicModel.h',
		'DynamicObject.cpp',
		'DynamicObject.h',
		'DynamicalSystem.cpp',
		'DynamicalSystem.h',
		'Engine.cpp',
		'Engine.h',
		'EventMapIndex.cpp',
		'EventMapIndex.h',
		'EventMapping.cpp',
		'EventMapping.h',
		'Exception.cpp',
		'Exception.h',
		'Filters.h',
		'FlightControlSystem.cpp',
		'FlightDynamics.cpp',
		'FlightDynamics.h',
		'FlightDynamicsChannels.h',
		'FlightModel.cpp',
		'FlightModel.h',
		'FuelManagementSystem.cpp',
		'FuelManagementSystem.h',
		'GameScreen.cpp',
		'GameScreen.h',
		'GearAnimation.cpp',
		'GearAnimation.h',
		'HID.cpp',
		'HID.h',
		'InputEvent.cpp',
		'InputEvent.h',
		'InputEventChannel.h',
		'InputInterface.cpp',
		'InputInterface.h',
		'KineticsChannels.h',
		'LandingGear.cpp',
		'LandingGear.h',
		'LandingGearChannels.h',
		'LogoScreen.cpp',
		'LogoScreen.h',
		'MapEvent.h',
#		'Module.cpp',
#		'Module.h',
		'NavigationChannels.h',
		'ObjectModel.cpp',
		'ObjectModel.h',
		'ObjectUpdate.net',
		'PhysicsModel.cpp',
		'PhysicsModel.h',
		'Profile.h',
		'Projection.cpp',
		'Projection.h',
		'ResourceBundle.cpp',
		'ResourceBundle.h',
		'SceneConstants.h',
		'SceneModel.cpp',
		'SceneModel.h',
		'ScreenInfo.cpp',
		'ScreenInfo.h',
		'ScreenInfoManager.cpp',
		'ScreenInfoManager.h',
		'SimpleSceneManager.cpp',
		'SimpleSceneManager.h',
		'Sky.cpp',
		'Sky.h',
		'SmokeEffects.cpp',
		'SmokeEffects.h',
		'SoundEffect.cpp',
		'SoundEffect.h',
		'SoundEngine.cpp',
		'SoundEngine.h',
		'SoundModel.cpp',
		'SoundModel.h',
		'StabilityFlightModel.cpp',
		'StabilityFlightModel.h',
		'Station.cpp',
		'Station.h',
		'Steerpoint.h',
		'System.cpp',
		'System.h',
		'SystemsModel.cpp',
		'SystemsModel.h',
		'TankObject.cpp',
		'TankObject.h',
		'TerrainObject.cpp',
		'TerrainObject.h',
		'Theater.cpp',
		'Theater.h',
		'ThrustData.cpp',
		'ThrustData.h',
		'VirtualScene.cpp',
		'VirtualScene.h',

#		'battlefield/Battlefield.cpp',
#		'battlefield/Battlefield.h',
#		'battlefield/BattlefieldMessages.net',
		'battlefield/LocalBattlefield.cpp',
		'battlefield/LocalBattlefield.h',
		'battlefield/SceneManager.cpp',
		'battlefield/SceneManager.h',
#		'battlefield/SimObject.cpp',
#		'battlefield/SimObject.h',

		'f16/AlphaNumericDisplay.cpp',
		'f16/AlphaNumericDisplay.h',
		'f16/DataEntry.h',
		'f16/DataEntryPage.cpp',
		'f16/DataEntryPage.h',
		'f16/F16Channels.cpp',
		'f16/F16Channels.h',
		'f16/F16Engine.cpp',
		'f16/F16Engine.h',
		'f16/F16FlightModel.cpp',
		'f16/F16FlightModel.h',
		'f16/F16GearDynamics.cpp',
		'f16/F16GearDynamics.h',
		'f16/F16HUD.cpp',
		'f16/F16HUD.h',
		'f16/F16INS.cpp',
	#	'f16/F16InputSystem.cpp',
	#	'f16/F16InputSystem.h',
		'f16/F16System.cpp',
		'f16/F16System.h',
		'f16/FLCS.cpp',
		'f16/FuelSystem.cpp',
		'f16/GroundAvoidanceAdvisory.cpp',
		'f16/GroundAvoidanceAdvisory.h',
		'f16/NavigationSystem.cpp',
		'f16/NavigationSystem.h',
		'f16/PageALOW.h',
		'f16/PageCNI.cpp',
		'f16/PageCNI.h',
		'f16/PageLIST.cpp',
		'f16/PageLIST.h',
		'f16/PageSTPT.h',
		'f16/PanelHUD.cpp',
		'f16/PanelHUD.h',
		'f16/Radio.cpp',
		'f16/Radio.h',
		'f16/SpecialFonts.h',
		'f16/UpFrontControls.cpp',
		'f16/UpFrontControls.h',

		'glDiagnostics.cpp',
		'glDiagnostics.h',

		'hud/HUD.cpp',
		'hud/HUD.h',
		'hud/PitchLadder.cpp',
		'hud/PitchLadder.h',
		'hud/Tape.cpp',
		'hud/Tape.h',
		'hud/Text.cpp',
		'hud/Text.h',

		'stores/DragProfile.cpp',
		'stores/DragProfile.h',
		'stores/Projectile.cpp',
		'stores/Projectile.h',
		'stores/Stores.cpp',
		'stores/Stores.h',
		'stores/StoresDatabase.cpp',
		'stores/StoresDatabase.h',
		'stores/StoresDefinition.cpp',
		'stores/StoresDefinition.h',
		'stores/StoresDynamics.h',
		'stores/StoresManagementSystem.cpp',
		'stores/StoresManagementSystem.h',

		'systems/AircraftFlightSensors.cpp',
		'systems/AircraftFlightSensors.h',
		'systems/AircraftInputSystem.cpp',
		'systems/AircraftInputSystem.h',
		'systems/AircraftSimpleFCS.cpp',
		'systems/AircraftSimpleFCS.h',

		'theater/CustomLayoutModel.cpp',
		'theater/CustomLayoutModel.h',
		'theater/ElevationCorrection.cpp',
		'theater/ElevationCorrection.h',
		'theater/Feature.cpp',
		'theater/Feature.h',
		'theater/FeatureGroup.cpp',
		'theater/FeatureGroup.h',
		'theater/FeatureGroupList.cpp',
		'theater/FeatureGroupList.h',
		'theater/FeatureGroupModel.h',
		'theater/FeatureLayout.cpp',
		'theater/FeatureLayout.h',
		'theater/FeatureModel.h',
		'theater/FeatureObjectModel.cpp',
		'theater/FeatureObjectModel.h',
		'theater/FeatureQuad.cpp',
		'theater/FeatureQuad.h',
		'theater/FeatureSceneGroup.h',
		'theater/FeatureSceneModel.cpp',
		'theater/FeatureSceneModel.h',
		'theater/IsoContour.cpp',
		'theater/IsoContour.h',
		'theater/LayoutTransform.cpp',
		'theater/LayoutTransform.h',
		'theater/Objective.cpp',
		'theater/Objective.h',
		'theater/RandomBillboardModel.cpp',
		'theater/RandomBillboardModel.h',
		'theater/RandomForestModel.cpp',
		'theater/RandomForestModel.h',

		'views/CameraAgent.cpp',
		'views/CameraAgent.h',
		'views/CameraCommand.h',
		'views/CameraKinematics.cpp',
		'views/CameraKinematics.h',
		'views/ExternalViews.cpp',
		'views/ExternalViews.h',
		'views/InternalView.cpp',
		'views/InternalView.h',
		'views/View.cpp',
		'views/View.h',
	],
	deps = ['csplib', 'opengl', 'osg', 'sdl'])


build.SharedLibrary(expenv,
	name = 'cspsim',
	sources = [
		'@cspsim',
		'@cspsim/battlefield',
		'@cspsim/config',
	],
	aliases = 'all',
	doxygen = 'cspsim.dox',
	softlink = 1,
	SHLIBPREFIX = '_')

build.SharedLibrary(expenv,
	name = 'indexserver',
	sources = [
		'indexserver.i',
		'IndexServer.h',
		'IndexServer.cpp',
		'@cspsim/battlefield',
		'@cspsim/config',
	],
	deps = ['csplib'],
	aliases = 'all',
	SHLIBPREFIX = '_')

